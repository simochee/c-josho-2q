# ほしい物リストを作成するプログラム

## もくじ

<!-- TOC -->

- [ほしい物リストを作成するプログラム](#ほしい物リストを作成するプログラム)
    - [もくじ](#もくじ)
    - [プログラムに用いた要素](#プログラムに用いた要素)
    - [実行結果](#実行結果)
    - [コメント付きプログラム](#コメント付きプログラム)
    - [解説](#解説)
    - [提出用ソースコード](#提出用ソースコード)

<!-- /TOC -->

## プログラムに用いた要素

* 構造体
* ファイル操作

## 実行結果

```
# 実行前の list.txt
名前：ライブチケット
値段：3000

名前：ルーズリーフ
値段：200


```

```
欲しいものを入力します。
名前
CD
値段
2000
```

```
# 実行後の list.txt
名前：ライブチケット
値段：3000

名前：ルーズリーフ
値段：200

名前：CD
値段：2000


```

## コメント付きプログラム

```c
/**
 * ほしい物リストを作成するプログラム
 */
#include <stdio.h>

// 欲しいものの構造体
struct item
{
    // 名前
    char name[100];
    // 値段
    int price;
};

int main(void)
{
    // ファイルポインタの宣言
    FILE *fp;
    // 構造体の宣言
    struct item want;
    // ファイルから読み取った行を保持する変数
    char s[200];

    // ファイルを追記モードで開く
    fp = fopen("list.txt", "a");

    // ファイルが開けなかったらエラーを表示して終了
    if(fp == NULL)
    {
        printf("エラー！ファイルが開けませんでした\n");
        return 0;
    }

    // 欲しいものを入力
    printf("欲しいものを入力します。\n");
    printf("名前\n");
    scanf("%s", want.name);
    printf("値段\n");
    scanf("%d", &want.price);

    // ファイルの先頭に入力した欲しいものを追加
    fprintf(fp, "名前：%s\n", want.name);
    fprintf(fp, "値段：%d\n", want.price);
    fprintf(fp, "\n");

    // ファイルを閉じる
    fclose(fp);

    return 0;
}
```

## 解説

* 上書モードと追記モードについて
    * `fopen( filename, "w")`とすると、上書モードになる。最初の`fprintf()`は元の内容に関わらず１行目に挿入される。
    * `fopen( filename, "a")`とすると、追記モードになる。最初の`fprintf()`は元の内容の続きに挿入される。

## 提出用ソースコード

[ハイライトされたプログラム](./program.c)

[プログラムのみ](https://raw.githubusercontent.com/simochee/c-josho-2q/master/alice/program.c)

